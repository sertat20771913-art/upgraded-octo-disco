<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Погода iOS6</title>
<style>
body {margin:0;font-family:"Helvetica Neue", Helvetica, Arial,sans-serif;background:linear-gradient(#0c1622,#071524);color:white;}
.container{max-width:320px;margin:40px auto;padding:20px;border-radius:20px;background:linear-gradient(#2b2b2b,#1b1b1b);box-shadow:0 0 15px #000;text-align:center;}
input{width:90%;padding:8px;border-radius:10px;border:none;text-align:center;margin-bottom:10px;}
button{background:#007aff;color:white;border:none;padding:8px 15px;border-radius:10px;font-size:14px;cursor:pointer;}
.city{font-size:22px;font-weight:300;margin-bottom:5px;}
.temp{font-size:60px;font-weight:200;margin:15px 0;}
.desc{font-size:18px;opacity:0.9;}
.footer{font-size:12px;opacity:0.6;margin-top:15px;}
</style>
</head>
<body>
<div class="container">
  <div class="city" id="city">Введите город</div>
  <input type="text" id="inputCity" placeholder="Например: Minsk">
  <button onclick="getWeather()">Показать</button>
  <div class="temp" id="temp">--°</div>
  <div class="desc" id="desc"></div>
  <div class="footer">Данные: Open-Meteo</div>
</div>

<script>
async function getWeather(){
  const city = document.getElementById("inputCity").value || "Minsk";
  try {
    // Геокодинг
    const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}`);
    const geoData = await geoRes.json();
    const first = geoData.results && geoData.results[0];
    if(!first) throw new Error("Город не найден");
    const lat = first.latitude;
    const lon = first.longitude;

    // Прогноз
    const params = new URLSearchParams({
      latitude: lat,
      longitude: lon,
      current_weather: 'true',
      daily: 'temperature_2m_max,temperature_2m_min,weathercode',
      timezone: 'auto'
    });
    const res = await fetch(`https://api.open-meteo.com/v1/forecast?${params.toString()}`);
    const data = await res.json();
    const cur = data.current_weather;
    document.getElementById("city").innerText = first.name + (first.country ? ", "+first.country : "");
    document.getElementById("temp").innerText = Math.round(cur.temperature)+"°";
    document.getElementById("desc").innerText = cur.weathercode;
  } catch(e){
    console.error(e);
    document.getElementById("desc").innerText = "Ошибка загрузки";
  }
}
</script>
</body>
</html>